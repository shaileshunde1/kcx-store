<!-- This is a snippet to enhance your admin_products.html -->
<!-- Replace your products table or grid with this modern card layout -->

{% extends "base.html" %}

{% block title %}Products | Admin{% endblock %}

{% block content %}
<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0 fw-bold">Products ({{ products|length }})</h2>
    <a href="{{ url_for('admin_product_add') }}" class="btn btn-dark">
      <i class="bi bi-plus-lg"></i> Add New Product
    </a>
  </div>

  <div class="row g-4">
    {% for product in products %}
      <div class="col-md-6 col-lg-4 col-xl-3">
        <div class="product-card">
          <!-- Image Section -->
          <div class="product-card-image">
            {% if product.images and product.images|length > 0 %}
              <img src="{{ url_for('static', filename=product.images[0].image_url) }}" 
                   alt="{{ product.name }}">
              {% if product.images|length > 1 %}
                <div class="image-count-badge">
                  <i class="bi bi-images"></i> {{ product.images|length }}
                </div>
              {% endif %}
            {% elif product.image_url %}
              <img src="{{ url_for('static', filename=product.image_url) }}" 
                   alt="{{ product.name }}">
            {% else %}
              <div class="no-image">
                <i class="bi bi-image"></i>
                <p>No image</p>
              </div>
            {% endif %}

            {% if product.is_bestseller %}
              <span class="bestseller-badge">
                <i class="bi bi-star-fill"></i> Bestseller
              </span>
            {% endif %}
          </div>

          <!-- Content Section -->
          <div class="product-card-body">
            <h5 class="product-card-title">{{ product.name }}</h5>
            <p class="product-card-price">â‚¹{{ product.price }}</p>
            
            {% if product.description %}
              <p class="product-card-description">
                {{ product.description[:60] }}{% if product.description|length > 60 %}...{% endif %}
              </p>
            {% endif %}

            <!-- Actions -->
            <div class="product-card-actions">
              <a href="{{ url_for('admin_product_edit', product_id=product.id) }}" 
                 class="btn btn-sm btn-outline-primary">
                <i class="bi bi-pencil"></i> Edit
              </a>
              <a href="{{ url_for('product_detail', product_id=product.id) }}" 
                 class="btn btn-sm btn-outline-secondary"
                 target="_blank">
                <i class="bi bi-eye"></i> View
              </a>
              <form method="post" 
                    action="{{ url_for('admin_product_delete', product_id=product.id) }}" 
                    style="display: inline;"
                    onsubmit="return confirm('Delete this product? This cannot be undone.');">
                <button type="submit" class="btn btn-sm btn-outline-danger">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    {% else %}
      <div class="col-12">
        <div class="text-center py-5">
          <i class="bi bi-inbox display-1 text-muted"></i>
          <h4 class="mt-3">No products yet</h4>
          <p class="text-muted">Start by adding your first product</p>
          <a href="{{ url_for('admin_product_add') }}" class="btn btn-dark mt-3">
            <i class="bi bi-plus-lg"></i> Add Product
          </a>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<style>
  .product-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  }

  .product-card-image {
    position: relative;
    height: 250px;
    overflow: hidden;
    background: #f8f9fa;
  }

  .product-card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .product-card:hover .product-card-image img {
    transform: scale(1.05);
  }

  .no-image {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: #6c757d;
  }

  .no-image i {
    font-size: 3rem;
    margin-bottom: 0.5rem;
  }

  .image-count-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .bestseller-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: linear-gradient(135deg, #ffc107, #ff9800);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(255, 193, 7, 0.4);
  }

  .product-card-body {
    padding: 1.25rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .product-card-title {
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: #212529;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .product-card-price {
    font-size: 1.5rem;
    font-weight: 700;
    color: #6f42c1;
    margin-bottom: 0.75rem;
  }

  .product-card-description {
    font-size: 0.875rem;
    color: #6c757d;
    margin-bottom: 1rem;
    flex: 1;
  }

  .product-card-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: auto;
  }

  .product-card-actions .btn {
    flex: 1;
    font-weight: 600;
    border-radius: 8px;
  }

  .product-card-actions form {
    flex: 0 0 auto;
  }

  @media (max-width: 768px) {
    .product-card-actions {
      flex-wrap: wrap;
    }

    .product-card-actions .btn {
      font-size: 0.875rem;
    }
  }
</style>
{% endblock %}